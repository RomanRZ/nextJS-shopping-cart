{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime-corejs2/regenerator\");\n\nvar _classCallCheck = require(\"@babel/runtime-corejs2/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime-corejs2/helpers/createClass\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _mitt = _interopRequireDefault(require(\"next-server/dist/lib/mitt\"));\n/* global document, window */\n\n\nfunction supportsPreload(el) {\n  try {\n    return el.relList.supports('preload');\n  } catch (_unused) {\n    return false;\n  }\n}\n\nvar hasPreload = supportsPreload(document.createElement('link'));\n\nfunction preloadScript(url) {\n  var link = document.createElement('link');\n  link.rel = 'preload';\n  link.crossOrigin = process.crossOrigin;\n  link.href = url;\n  link.as = 'script';\n  document.head.appendChild(link);\n}\n\nvar PageLoader =\n/*#__PURE__*/\nfunction () {\n  function PageLoader(buildId, assetPrefix) {\n    var _this3 = this;\n\n    _classCallCheck(this, PageLoader);\n\n    this.buildId = buildId;\n    this.assetPrefix = assetPrefix;\n    this.pageCache = {};\n    this.pageRegisterEvents = (0, _mitt[\"default\"])();\n    this.loadingRoutes = {};\n    this.promisedBuildId = _promise[\"default\"].resolve();\n\n    if (process.env.__NEXT_GRANULAR_CHUNKS) {\n      this.promisedBuildManifest = new _promise[\"default\"](function (resolve) {\n        if (window.__BUILD_MANIFEST) {\n          resolve(window.__BUILD_MANIFEST);\n        } else {\n          window.__BUILD_MANIFEST_CB = function () {\n            resolve(window.__BUILD_MANIFEST);\n          };\n        }\n      });\n    }\n\n    if (process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING) {\n      this.promisedBuildId = _promise[\"default\"].resolve();\n\n      this.onDynamicBuildId = function () {\n        _this3.promisedBuildId = new _promise[\"default\"](function (resolve) {\n          var unfetch = require('unfetch');\n\n          unfetch(_this3.assetPrefix + \"/_next/static/HEAD_BUILD_ID\").then(function (res) {\n            if (res.ok) {\n              return res;\n            }\n\n            var err = new Error('Failed to fetch HEAD buildId');\n            err.res = res;\n            throw err;\n          }).then(function (res) {\n            return res.text();\n          }).then(function (buildId) {\n            _this3.buildId = buildId.trim();\n          })[\"catch\"](function () {\n            // When this fails it's not a _huge_ deal, preload wont work and page\n            // navigation will 404, triggering a SSR refresh\n            console.warn('Failed to load BUILD_ID from server. ' + 'The following client-side page transition will likely 404 and cause a SSR.\\n' + 'http://err.sh/zeit/next.js/head-build-id');\n          }).then(resolve, resolve);\n        });\n      };\n    }\n  } // Returns a promise for the dependencies for a particular route\n\n\n  _createClass(PageLoader, [{\n    key: \"getDependencies\",\n    value: function getDependencies(route) {\n      return this.promisedBuildManifest.then(function (man) {\n        return man[route] && man[route].map(function (url) {\n          return \"/_next/\" + url;\n        }) || [];\n      });\n    }\n  }, {\n    key: \"normalizeRoute\",\n    value: function normalizeRoute(route) {\n      if (route[0] !== '/') {\n        throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\" + route + \"\\\"\");\n      }\n\n      route = route.replace(/\\/index$/, '/');\n      if (route === '/') return route;\n      return route.replace(/\\/$/, '');\n    }\n  }, {\n    key: \"loadPage\",\n    value: function loadPage(route) {\n      var _this4 = this;\n\n      route = this.normalizeRoute(route);\n      return new _promise[\"default\"](function (resolve, reject) {\n        var fire = function fire(_ref) {\n          var error = _ref.error,\n              page = _ref.page;\n\n          _this4.pageRegisterEvents.off(route, fire);\n\n          delete _this4.loadingRoutes[route];\n\n          if (error) {\n            reject(error);\n          } else {\n            resolve(page);\n          }\n        }; // If there's a cached version of the page, let's use it.\n\n\n        var cachedPage = _this4.pageCache[route];\n\n        if (cachedPage) {\n          var error = cachedPage.error,\n              page = cachedPage.page;\n          error ? reject(error) : resolve(page);\n          return;\n        } // Register a listener to get the page\n\n\n        _this4.pageRegisterEvents.on(route, fire); // If the page is loading via SSR, we need to wait for it\n        // rather downloading it again.\n\n\n        if (document.querySelector(\"script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n          return;\n        }\n\n        if (!_this4.loadingRoutes[route]) {\n          if (process.env.__NEXT_GRANULAR_CHUNKS) {\n            _this4.getDependencies(route).then(function (deps) {\n              deps.forEach(function (d) {\n                if (!document.querySelector(\"script[src^=\\\"\" + d + \"\\\"]\")) {\n                  _this4.loadScript(d, route, false);\n                }\n              });\n\n              _this4.loadRoute(route);\n\n              _this4.loadingRoutes[route] = true;\n            });\n          } else {\n            _this4.loadRoute(route);\n\n            _this4.loadingRoutes[route] = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"loadRoute\",\n    value: function loadRoute(route) {\n      var _this = this;\n\n      return (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var scriptRoute, url;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return _this.promisedBuildId;\n\n              case 3:\n                route = _this.normalizeRoute(route);\n                scriptRoute = route === '/' ? '/index.js' : route + \".js\";\n                url = _this.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this.buildId) + \"/pages\" + scriptRoute;\n\n                _this.loadScript(url, route, true);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }, {\n    key: \"loadScript\",\n    value: function loadScript(url, route, isPage) {\n      var _this5 = this;\n\n      var script = document.createElement('script');\n\n      if (process.env.__NEXT_MODERN_BUILD && 'noModule' in script) {\n        script.type = 'module'; // Only page bundle scripts need to have .module added to url,\n        // dependencies already have it added during build manifest creation\n\n        if (isPage) url = url.replace(/\\.js$/, '.module.js');\n      }\n\n      script.crossOrigin = process.crossOrigin;\n      script.src = url;\n\n      script.onerror = function () {\n        var error = new Error(\"Error loading script \" + url);\n        error.code = 'PAGE_LOAD_ERROR';\n\n        _this5.pageRegisterEvents.emit(route, {\n          error: error\n        });\n      };\n\n      document.body.appendChild(script);\n    } // This method if called by the route code.\n\n  }, {\n    key: \"registerPage\",\n    value: function registerPage(route, regFn) {\n      var _this6 = this;\n\n      var register = function register() {\n        try {\n          var _regFn = regFn(),\n              error = _regFn.error,\n              page = _regFn.page;\n\n          _this6.pageCache[route] = {\n            error: error,\n            page: page\n          };\n\n          _this6.pageRegisterEvents.emit(route, {\n            error: error,\n            page: page\n          });\n        } catch (error) {\n          _this6.pageCache[route] = {\n            error: error\n          };\n\n          _this6.pageRegisterEvents.emit(route, {\n            error: error\n          });\n        }\n      };\n\n      if (process.env.NODE_ENV !== 'production') {\n        // Wait for webpack to become idle if it's not.\n        // More info: https://github.com/zeit/next.js/pull/1511\n        if (module.hot && module.hot.status() !== 'idle') {\n          console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\" + route + \"\\\"\");\n\n          var check = function check(status) {\n            if (status === 'idle') {\n              module.hot.removeStatusHandler(check);\n              register();\n            }\n          };\n\n          module.hot.status(check);\n          return;\n        }\n      }\n\n      register();\n    }\n  }, {\n    key: \"prefetch\",\n    value: function prefetch(route, isDependency) {\n      var _this2 = this;\n\n      return (0, _asyncToGenerator2[\"default\"])(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var scriptRoute, url, cn;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                _context2.next = 3;\n                return _this2.promisedBuildId;\n\n              case 3:\n                route = _this2.normalizeRoute(route);\n                scriptRoute = (route === '/' ? '/index' : route) + \".js\";\n\n                if (process.env.__NEXT_MODERN_BUILD && 'noModule' in document.createElement('script')) {\n                  scriptRoute = scriptRoute.replace(/\\.js$/, '.module.js');\n                }\n\n                url = isDependency ? route : _this2.assetPrefix + \"/_next/static/\" + encodeURIComponent(_this2.buildId) + \"/pages\" + scriptRoute; // n.b. If preload is not supported, we fall back to `loadPage` which has\n                // its own deduping mechanism.\n\n                if (!document.querySelector(\"link[rel=\\\"preload\\\"][href^=\\\"\" + url + \"\\\"], script[data-next-page=\\\"\" + route + \"\\\"]\")) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 9:\n                if (!(cn = navigator.connection)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                if (!((cn.effectiveType || '').indexOf('2g') !== -1 || cn.saveData)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 12:\n                if (!(process.env.__NEXT_GRANULAR_CHUNKS && !isDependency)) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                ;\n                _context2.next = 16;\n                return _this2.getDependencies(route);\n\n              case 16:\n                _context2.t0 = function (url) {\n                  _this2.prefetch(url, true);\n                };\n\n                _context2.sent.forEach(_context2.t0);\n\n              case 18:\n                if (!hasPreload) {\n                  _context2.next = 21;\n                  break;\n                }\n\n                preloadScript(url);\n                return _context2.abrupt(\"return\");\n\n              case 21:\n                if (!isDependency) {\n                  _context2.next = 23;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 23:\n                if (!(document.readyState === 'complete')) {\n                  _context2.next = 27;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", _this2.loadPage(route)[\"catch\"](function () {}));\n\n              case 27:\n                return _context2.abrupt(\"return\", new _promise[\"default\"](function (resolve) {\n                  window.addEventListener('load', function () {\n                    _this2.loadPage(route).then(function () {\n                      return resolve();\n                    }, function () {\n                      return resolve();\n                    });\n                  });\n                }));\n\n              case 28:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  }]);\n\n  return PageLoader;\n}();\n\nexports[\"default\"] = PageLoader;","map":{"version":3,"sources":["/home/user/Desktop/rabcheniuk/nextJS-shopping-cart/node_modules/next/dist/client/page-loader.js"],"names":["_interopRequireDefault","require","exports","__esModule","_asyncToGenerator2","_promise","_mitt","supportsPreload","el","relList","supports","_unused","hasPreload","document","createElement","preloadScript","url","link","rel","crossOrigin","process","href","as","head","appendChild","PageLoader","buildId","assetPrefix","pageCache","pageRegisterEvents","loadingRoutes","promisedBuildId","resolve","env","__NEXT_GRANULAR_CHUNKS","promisedBuildManifest","window","__BUILD_MANIFEST","__BUILD_MANIFEST_CB","__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING","onDynamicBuildId","unfetch","then","res","ok","err","Error","text","trim","console","warn","route","man","map","replace","normalizeRoute","reject","fire","_ref","error","page","off","cachedPage","on","querySelector","getDependencies","deps","forEach","d","loadScript","loadRoute","_this","scriptRoute","encodeURIComponent","isPage","script","__NEXT_MODERN_BUILD","type","src","onerror","code","emit","body","regFn","register","NODE_ENV","module","hot","status","log","check","removeStatusHandler","isDependency","_this2","cn","navigator","connection","effectiveType","indexOf","saveData","prefetch","readyState","loadPage","addEventListener"],"mappings":"AAAA;;;;;;;;AAAa,IAAIA,sBAAsB,GAACC,OAAO,CAAC,sDAAD,CAAlC;;AAA2FC,OAAO,CAACC,UAAR,GAAmB,IAAnB;AAAwBD,OAAO,WAAP,GAAgB,KAAK,CAArB;;AAAuB,IAAIE,kBAAkB,GAACJ,sBAAsB,CAACC,OAAO,CAAC,iDAAD,CAAR,CAA7C;;AAA0G,IAAII,QAAQ,GAACL,sBAAsB,CAACC,OAAO,CAAC,wCAAD,CAAR,CAAnC;;AAAuF,IAAIK,KAAK,GAACN,sBAAsB,CAACC,OAAO,CAAC,2BAAD,CAAR,CAAhC;AAAuE;;;AAA6B,SAASM,eAAT,CAAyBC,EAAzB,EAA4B;AAAC,MAAG;AAAC,WAAOA,EAAE,CAACC,OAAH,CAAWC,QAAX,CAAoB,SAApB,CAAP;AAAuC,GAA3C,CAA2C,OAAMC,OAAN,EAAc;AAAC,WAAO,KAAP;AAAc;AAAC;;AAAA,IAAMC,UAAU,GAACL,eAAe,CAACM,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAD,CAAhC;;AAAiE,SAASC,aAAT,CAAuBC,GAAvB,EAA2B;AAAC,MAAMC,IAAI,GAACJ,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAX;AAA0CG,EAAAA,IAAI,CAACC,GAAL,GAAS,SAAT;AAAmBD,EAAAA,IAAI,CAACE,WAAL,GAAiBC,OAAO,CAACD,WAAzB;AAAqCF,EAAAA,IAAI,CAACI,IAAL,GAAUL,GAAV;AAAcC,EAAAA,IAAI,CAACK,EAAL,GAAQ,QAAR;AAAiBT,EAAAA,QAAQ,CAACU,IAAT,CAAcC,WAAd,CAA0BP,IAA1B;AAAiC;;IAAMQ,U;;;AAAW,sBAAYC,OAAZ,EAAoBC,WAApB,EAAgC;AAAA;;AAAA;;AAAC,SAAKD,OAAL,GAAaA,OAAb;AAAqB,SAAKC,WAAL,GAAiBA,WAAjB;AAA6B,SAAKC,SAAL,GAAe,EAAf;AAAkB,SAAKC,kBAAL,GAAwB,CAAC,GAAEvB,KAAK,WAAR,GAAxB;AAA4C,SAAKwB,aAAL,GAAmB,EAAnB;AAAsB,SAAKC,eAAL,GAAqB1B,QAAQ,WAAR,CAAiB2B,OAAjB,EAArB;;AAAgD,QAAGZ,OAAO,CAACa,GAAR,CAAYC,sBAAf,EAAsC;AAAC,WAAKC,qBAAL,GAA2B,IAAI9B,QAAQ,WAAZ,CAAqB,UAAA2B,OAAO,EAAE;AAAC,YAAGI,MAAM,CAACC,gBAAV,EAA2B;AAACL,UAAAA,OAAO,CAACI,MAAM,CAACC,gBAAR,CAAP;AAAkC,SAA9D,MAAkE;AAACD,UAAAA,MAAM,CAACE,mBAAP,GAA2B,YAAI;AAACN,YAAAA,OAAO,CAACI,MAAM,CAACC,gBAAR,CAAP;AAAkC,WAAlE;AAAoE;AAAC,OAAvK,CAA3B;AAAqM;;AAAA,QAAGjB,OAAO,CAACa,GAAR,CAAYM,yCAAf,EAAyD;AAAC,WAAKR,eAAL,GAAqB1B,QAAQ,WAAR,CAAiB2B,OAAjB,EAArB;;AAAgD,WAAKQ,gBAAL,GAAsB,YAAI;AAAC,QAAA,MAAI,CAACT,eAAL,GAAqB,IAAI1B,QAAQ,WAAZ,CAAqB,UAAA2B,OAAO,EAAE;AAAC,cAAMS,OAAO,GAACxC,OAAO,CAAC,SAAD,CAArB;;AAAiCwC,UAAAA,OAAO,CAAC,MAAI,CAACd,WAAL,GAAiB,6BAAlB,CAAP,CAAwDe,IAAxD,CAA6D,UAAAC,GAAG,EAAE;AAAC,gBAAGA,GAAG,CAACC,EAAP,EAAU;AAAC,qBAAOD,GAAP;AAAY;;AAAA,gBAAME,GAAG,GAAC,IAAIC,KAAJ,CAAU,8BAAV,CAAV;AAAoDD,YAAAA,GAAG,CAACF,GAAJ,GAAQA,GAAR;AAAY,kBAAME,GAAN;AAAW,WAArK,EAAuKH,IAAvK,CAA4K,UAAAC,GAAG;AAAA,mBAAEA,GAAG,CAACI,IAAJ,EAAF;AAAA,WAA/K,EAA6LL,IAA7L,CAAkM,UAAAhB,OAAO,EAAE;AAAC,YAAA,MAAI,CAACA,OAAL,GAAaA,OAAO,CAACsB,IAAR,EAAb;AAA6B,WAAzO,WAAiP,YAAI;AAAC;AACrsD;AACAC,YAAAA,OAAO,CAACC,IAAR,CAAa,0CAAwC,8EAAxC,GAAuH,0CAApI;AAAiL,WAF8xC,EAE5xCR,IAF4xC,CAEvxCV,OAFuxC,EAE/wCA,OAF+wC;AAErwC,SAFqsC,CAArB;AAE7qC,OAFkpC;AAEhpC;AAAC,G,CAAA;;;;;oCAChMmB,K,EAAM;AAAC,aAAO,KAAKhB,qBAAL,CAA2BO,IAA3B,CAAgC,UAAAU,GAAG;AAAA,eAAEA,GAAG,CAACD,KAAD,CAAH,IAAYC,GAAG,CAACD,KAAD,CAAH,CAAWE,GAAX,CAAe,UAAArC,GAAG;AAAA,iBAAE,YAAUA,GAAZ;AAAA,SAAlB,CAAZ,IAAgD,EAAlD;AAAA,OAAnC,CAAP;AAAiG;;;mCAAemC,K,EAAM;AAAC,UAAGA,KAAK,CAAC,CAAD,CAAL,KAAW,GAAd,EAAkB;AAAC,cAAM,IAAIL,KAAJ,CAAU,iDAA+CK,KAA/C,GAAqD,IAA/D,CAAN;AAA4E;;AAAAA,MAAAA,KAAK,GAACA,KAAK,CAACG,OAAN,CAAc,UAAd,EAAyB,GAAzB,CAAN;AAAoC,UAAGH,KAAK,KAAG,GAAX,EAAe,OAAOA,KAAP;AAAa,aAAOA,KAAK,CAACG,OAAN,CAAc,KAAd,EAAoB,EAApB,CAAP;AAAgC;;;6BAASH,K,EAAM;AAAA;;AAACA,MAAAA,KAAK,GAAC,KAAKI,cAAL,CAAoBJ,KAApB,CAAN;AAAiC,aAAO,IAAI9C,QAAQ,WAAZ,CAAqB,UAAC2B,OAAD,EAASwB,MAAT,EAAkB;AAAC,YAAMC,IAAI,GAAC,SAALA,IAAK,CAACC,IAAD,EAAQ;AAAA,cAAKC,KAAL,GAAiBD,IAAjB,CAAKC,KAAL;AAAA,cAAWC,IAAX,GAAiBF,IAAjB,CAAWE,IAAX;;AAAsB,UAAA,MAAI,CAAC/B,kBAAL,CAAwBgC,GAAxB,CAA4BV,KAA5B,EAAkCM,IAAlC;;AAAwC,iBAAO,MAAI,CAAC3B,aAAL,CAAmBqB,KAAnB,CAAP;;AAAiC,cAAGQ,KAAH,EAAS;AAACH,YAAAA,MAAM,CAACG,KAAD,CAAN;AAAe,WAAzB,MAA6B;AAAC3B,YAAAA,OAAO,CAAC4B,IAAD,CAAP;AAAe;AAAC,SAAhK,CAAD,CAAkK;;;AAC9kB,YAAME,UAAU,GAAC,MAAI,CAAClC,SAAL,CAAeuB,KAAf,CAAjB;;AAAuC,YAAGW,UAAH,EAAc;AAAA,cAAOH,KAAP,GAAmBG,UAAnB,CAAOH,KAAP;AAAA,cAAaC,IAAb,GAAmBE,UAAnB,CAAaF,IAAb;AAA8BD,UAAAA,KAAK,GAACH,MAAM,CAACG,KAAD,CAAP,GAAe3B,OAAO,CAAC4B,IAAD,CAA3B;AAAkC;AAAQ,SAD+S,CAC/S;;;AAC7H,QAAA,MAAI,CAAC/B,kBAAL,CAAwBkC,EAAxB,CAA2BZ,KAA3B,EAAiCM,IAAjC,EAF4a,CAErY;AACvC;;;AACA,YAAG5C,QAAQ,CAACmD,aAAT,CAAuB,6BAA2Bb,KAA3B,GAAiC,KAAxD,CAAH,EAAkE;AAAC;AAAQ;;AAAA,YAAG,CAAC,MAAI,CAACrB,aAAL,CAAmBqB,KAAnB,CAAJ,EAA8B;AAAC,cAAG/B,OAAO,CAACa,GAAR,CAAYC,sBAAf,EAAsC;AAAC,YAAA,MAAI,CAAC+B,eAAL,CAAqBd,KAArB,EAA4BT,IAA5B,CAAiC,UAAAwB,IAAI,EAAE;AAACA,cAAAA,IAAI,CAACC,OAAL,CAAa,UAAAC,CAAC,EAAE;AAAC,oBAAG,CAACvD,QAAQ,CAACmD,aAAT,CAAuB,mBAAiBI,CAAjB,GAAmB,KAA1C,CAAJ,EAAqD;AAAC,kBAAA,MAAI,CAACC,UAAL,CAAgBD,CAAhB,EAAkBjB,KAAlB,EAAwB,KAAxB;AAAgC;AAAC,eAAxG;;AAA0G,cAAA,MAAI,CAACmB,SAAL,CAAenB,KAAf;;AAAsB,cAAA,MAAI,CAACrB,aAAL,CAAmBqB,KAAnB,IAA0B,IAA1B;AAAgC,aAAxM;AAA2M,WAAlP,MAAsP;AAAC,YAAA,MAAI,CAACmB,SAAL,CAAenB,KAAf;;AAAsB,YAAA,MAAI,CAACrB,aAAL,CAAmBqB,KAAnB,IAA0B,IAA1B;AAAgC;AAAC;AAAC,OAJpB,CAAP;AAI8B;;;8BAAUA,K,EAAM;AAAC,UAAIoB,KAAK,GAAC,IAAV;;AAAe,aAAM,CAAC,GAAEnE,kBAAkB,WAArB;AAAA;AAAA,+BAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAegB,OAAO,CAACa,GAAR,CAAYM,yCAA3B;AAAA;AAAA;AAAA;;AAAA;AAAsE,uBAAMgC,KAAK,CAACxC,eAAZ;;AAAtE;AAAmGoB,gBAAAA,KAAK,GAACoB,KAAK,CAAChB,cAAN,CAAqBJ,KAArB,CAAN;AAAsCqB,gBAAAA,WAAzI,GAAqJrB,KAAK,KAAG,GAAR,GAAY,WAAZ,GAAwBA,KAAK,GAAC,KAAnL;AAA+LnC,gBAAAA,GAA/L,GAAmMuD,KAAK,CAAC5C,WAAN,GAAkB,gBAAlB,GAAmC8C,kBAAkB,CAACF,KAAK,CAAC7C,OAAP,CAArD,GAAqE,QAArE,GAA8E8C,WAAjR;;AAA6RD,gBAAAA,KAAK,CAACF,UAAN,CAAiBrD,GAAjB,EAAqBmC,KAArB,EAA2B,IAA3B;;AAA7R;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA/B,IAAN;AAAyW;;;+BAAWnC,G,EAAImC,K,EAAMuB,M,EAAO;AAAA;;AAAC,UAAMC,MAAM,GAAC9D,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;;AAA8C,UAAGM,OAAO,CAACa,GAAR,CAAY2C,mBAAZ,IAAiC,cAAaD,MAAjD,EAAwD;AAACA,QAAAA,MAAM,CAACE,IAAP,GAAY,QAAZ,CAAD,CAAsB;AAC97B;;AACA,YAAGH,MAAH,EAAU1D,GAAG,GAACA,GAAG,CAACsC,OAAJ,CAAY,OAAZ,EAAoB,YAApB,CAAJ;AAAuC;;AAAAqB,MAAAA,MAAM,CAACxD,WAAP,GAAmBC,OAAO,CAACD,WAA3B;AAAuCwD,MAAAA,MAAM,CAACG,GAAP,GAAW9D,GAAX;;AAAe2D,MAAAA,MAAM,CAACI,OAAP,GAAe,YAAI;AAAC,YAAMpB,KAAK,GAAC,IAAIb,KAAJ,CAAU,0BAAwB9B,GAAlC,CAAZ;AAAmD2C,QAAAA,KAAK,CAACqB,IAAN,GAAW,iBAAX;;AAA6B,QAAA,MAAI,CAACnD,kBAAL,CAAwBoD,IAAxB,CAA6B9B,KAA7B,EAAmC;AAACQ,UAAAA,KAAK,EAALA;AAAD,SAAnC;AAA6C,OAAjJ;;AAAkJ9C,MAAAA,QAAQ,CAACqE,IAAT,CAAc1D,WAAd,CAA0BmD,MAA1B;AAAmC,K,CAAA;;;;iCAC/QxB,K,EAAMgC,K,EAAM;AAAA;;AAAC,UAAMC,QAAQ,GAAC,SAATA,QAAS,GAAI;AAAC,YAAG;AAAA,uBAAmBD,KAAK,EAAxB;AAAA,cAAOxB,KAAP,UAAOA,KAAP;AAAA,cAAaC,IAAb,UAAaA,IAAb;;AAA2B,UAAA,MAAI,CAAChC,SAAL,CAAeuB,KAAf,IAAsB;AAACQ,YAAAA,KAAK,EAALA,KAAD;AAAOC,YAAAA,IAAI,EAAJA;AAAP,WAAtB;;AAAmC,UAAA,MAAI,CAAC/B,kBAAL,CAAwBoD,IAAxB,CAA6B9B,KAA7B,EAAmC;AAACQ,YAAAA,KAAK,EAALA,KAAD;AAAOC,YAAAA,IAAI,EAAJA;AAAP,WAAnC;AAAkD,SAAnH,CAAmH,OAAMD,KAAN,EAAY;AAAC,UAAA,MAAI,CAAC/B,SAAL,CAAeuB,KAAf,IAAsB;AAACQ,YAAAA,KAAK,EAALA;AAAD,WAAtB;;AAA8B,UAAA,MAAI,CAAC9B,kBAAL,CAAwBoD,IAAxB,CAA6B9B,KAA7B,EAAmC;AAACQ,YAAAA,KAAK,EAALA;AAAD,WAAnC;AAA6C;AAAC,OAAhO;;AAAiO,UAAGvC,OAAO,CAACa,GAAR,CAAYoD,QAAZ,KAAuB,YAA1B,EAAuC;AAAC;AACnS;AACA,YAAGC,MAAM,CAACC,GAAP,IAAYD,MAAM,CAACC,GAAP,CAAWC,MAAX,OAAsB,MAArC,EAA4C;AAACvC,UAAAA,OAAO,CAACwC,GAAR,CAAY,sEAAoEtC,KAApE,GAA0E,IAAtF;;AAA4F,cAAMuC,KAAK,GAAC,SAANA,KAAM,CAAAF,MAAM,EAAE;AAAC,gBAAGA,MAAM,KAAG,MAAZ,EAAmB;AAACF,cAAAA,MAAM,CAACC,GAAP,CAAWI,mBAAX,CAA+BD,KAA/B;AAAsCN,cAAAA,QAAQ;AAAI;AAAC,WAA5F;;AAA6FE,UAAAA,MAAM,CAACC,GAAP,CAAWC,MAAX,CAAkBE,KAAlB;AAAyB;AAAQ;AAAC;;AAAAN,MAAAA,QAAQ;AAAI;;;6BAASjC,K,EAAMyC,Y,EAAa;AAAC,UAAIC,MAAM,GAAC,IAAX;;AAAgB,aAAM,CAAC,GAAEzF,kBAAkB,WAArB;AAAA;AAAA,+BAA+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAegB,OAAO,CAACa,GAAR,CAAYM,yCAA3B;AAAA;AAAA;AAAA;;AAAA;AAAsE,uBAAMsD,MAAM,CAAC9D,eAAb;;AAAtE;AAAoGoB,gBAAAA,KAAK,GAAC0C,MAAM,CAACtC,cAAP,CAAsBJ,KAAtB,CAAN;AAAuCqB,gBAAAA,WAA3I,GAAuJ,CAACrB,KAAK,KAAG,GAAR,GAAY,QAAZ,GAAqBA,KAAtB,IAA6B,KAApL;;AAA0L,oBAAG/B,OAAO,CAACa,GAAR,CAAY2C,mBAAZ,IAAiC,cAAa/D,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAjD,EAAkF;AAAC0D,kBAAAA,WAAW,GAACA,WAAW,CAAClB,OAAZ,CAAoB,OAApB,EAA4B,YAA5B,CAAZ;AAAuD;;AAAMtC,gBAAAA,GAA1U,GAA8U4E,YAAY,GAACzC,KAAD,GAAO0C,MAAM,CAAClE,WAAP,GAAmB,gBAAnB,GAAoC8C,kBAAkB,CAACoB,MAAM,CAACnE,OAAR,CAAtD,GAAuE,QAAvE,GAAgF8C,WAAjb,EAA6b;AACnyB;;AADsW,qBAEnW3D,QAAQ,CAACmD,aAAT,CAAuB,mCAAiChD,GAAjC,GAAqC,+BAArC,GAAqEmC,KAArE,GAA2E,KAAlG,CAFmW;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,sBAG5V2C,EAAE,GAACC,SAAS,CAACC,UAH+U;AAAA;AAAA;AAAA;;AAAA,sBAInW,CAACF,EAAE,CAACG,aAAH,IAAkB,EAAnB,EAAuBC,OAAvB,CAA+B,IAA/B,MAAuC,CAAC,CAAxC,IAA2CJ,EAAE,CAACK,QAJqT;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,sBAI/R/E,OAAO,CAACa,GAAR,CAAYC,sBAAZ,IAAoC,CAAC0D,YAJ0P;AAAA;AAAA;AAAA;;AAI5O;AAJ4O;AAI1O,uBAAMC,MAAM,CAAC5B,eAAP,CAAuBd,KAAvB,CAAN;;AAJ0O;AAAA,+BAI7L,UAAAnC,GAAG,EAAE;AAAC6E,kBAAAA,MAAM,CAACO,QAAP,CAAgBpF,GAAhB,EAAoB,IAApB;AAA2B,iBAJ4J;;AAAA,+BAIrMmD,OAJqM;;AAAA;AAAA,qBAOnWvD,UAPmW;AAAA;AAAA;AAAA;;AAOvVG,gBAAAA,aAAa,CAACC,GAAD,CAAb;AAPuV;;AAAA;AAAA,qBAOzT4E,YAPyT;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,sBAS3V/E,QAAQ,CAACwF,UAAT,KAAsB,UATqU;AAAA;AAAA;AAAA;;AAAA,kDASlTR,MAAM,CAACS,QAAP,CAAgBnD,KAAhB,WAA6B,YAAI,CAAE,CAAnC,CATkT;;AAAA;AAAA,kDAShQ,IAAI9C,QAAQ,WAAZ,CAAqB,UAAA2B,OAAO,EAAE;AAACI,kBAAAA,MAAM,CAACmE,gBAAP,CAAwB,MAAxB,EAA+B,YAAI;AAACV,oBAAAA,MAAM,CAACS,QAAP,CAAgBnD,KAAhB,EAAuBT,IAAvB,CAA4B;AAAA,6BAAIV,OAAO,EAAX;AAAA,qBAA5B,EAA0C;AAAA,6BAAIA,OAAO,EAAX;AAAA,qBAA1C;AAA0D,mBAA9F;AAAiG,iBAAhI,CATgQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA/B,IAAN;AASlF;;;;;;AAAC9B,OAAO,WAAP,GAAgBuB,UAAhB","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));var _promise=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));var _mitt=_interopRequireDefault(require(\"next-server/dist/lib/mitt\"));/* global document, window */function supportsPreload(el){try{return el.relList.supports('preload');}catch(_unused){return false;}}const hasPreload=supportsPreload(document.createElement('link'));function preloadScript(url){const link=document.createElement('link');link.rel='preload';link.crossOrigin=process.crossOrigin;link.href=url;link.as='script';document.head.appendChild(link);}class PageLoader{constructor(buildId,assetPrefix){this.buildId=buildId;this.assetPrefix=assetPrefix;this.pageCache={};this.pageRegisterEvents=(0,_mitt.default)();this.loadingRoutes={};this.promisedBuildId=_promise.default.resolve();if(process.env.__NEXT_GRANULAR_CHUNKS){this.promisedBuildManifest=new _promise.default(resolve=>{if(window.__BUILD_MANIFEST){resolve(window.__BUILD_MANIFEST);}else{window.__BUILD_MANIFEST_CB=()=>{resolve(window.__BUILD_MANIFEST);};}});}if(process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING){this.promisedBuildId=_promise.default.resolve();this.onDynamicBuildId=()=>{this.promisedBuildId=new _promise.default(resolve=>{const unfetch=require('unfetch');unfetch(this.assetPrefix+\"/_next/static/HEAD_BUILD_ID\").then(res=>{if(res.ok){return res;}const err=new Error('Failed to fetch HEAD buildId');err.res=res;throw err;}).then(res=>res.text()).then(buildId=>{this.buildId=buildId.trim();}).catch(()=>{// When this fails it's not a _huge_ deal, preload wont work and page\n// navigation will 404, triggering a SSR refresh\nconsole.warn('Failed to load BUILD_ID from server. '+'The following client-side page transition will likely 404 and cause a SSR.\\n'+'http://err.sh/zeit/next.js/head-build-id');}).then(resolve,resolve);});};}}// Returns a promise for the dependencies for a particular route\ngetDependencies(route){return this.promisedBuildManifest.then(man=>man[route]&&man[route].map(url=>\"/_next/\"+url)||[]);}normalizeRoute(route){if(route[0]!=='/'){throw new Error(\"Route name should start with a \\\"/\\\", got \\\"\"+route+\"\\\"\");}route=route.replace(/\\/index$/,'/');if(route==='/')return route;return route.replace(/\\/$/,'');}loadPage(route){route=this.normalizeRoute(route);return new _promise.default((resolve,reject)=>{const fire=(_ref)=>{let{error,page}=_ref;this.pageRegisterEvents.off(route,fire);delete this.loadingRoutes[route];if(error){reject(error);}else{resolve(page);}};// If there's a cached version of the page, let's use it.\nconst cachedPage=this.pageCache[route];if(cachedPage){const{error,page}=cachedPage;error?reject(error):resolve(page);return;}// Register a listener to get the page\nthis.pageRegisterEvents.on(route,fire);// If the page is loading via SSR, we need to wait for it\n// rather downloading it again.\nif(document.querySelector(\"script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}if(!this.loadingRoutes[route]){if(process.env.__NEXT_GRANULAR_CHUNKS){this.getDependencies(route).then(deps=>{deps.forEach(d=>{if(!document.querySelector(\"script[src^=\\\"\"+d+\"\\\"]\")){this.loadScript(d,route,false);}});this.loadRoute(route);this.loadingRoutes[route]=true;});}else{this.loadRoute(route);this.loadingRoutes[route]=true;}}});}loadRoute(route){var _this=this;return(0,_asyncToGenerator2.default)(function*(){if(process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING){yield _this.promisedBuildId;}route=_this.normalizeRoute(route);let scriptRoute=route==='/'?'/index.js':route+\".js\";const url=_this.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this.buildId)+\"/pages\"+scriptRoute;_this.loadScript(url,route,true);})();}loadScript(url,route,isPage){const script=document.createElement('script');if(process.env.__NEXT_MODERN_BUILD&&'noModule'in script){script.type='module';// Only page bundle scripts need to have .module added to url,\n// dependencies already have it added during build manifest creation\nif(isPage)url=url.replace(/\\.js$/,'.module.js');}script.crossOrigin=process.crossOrigin;script.src=url;script.onerror=()=>{const error=new Error(\"Error loading script \"+url);error.code='PAGE_LOAD_ERROR';this.pageRegisterEvents.emit(route,{error});};document.body.appendChild(script);}// This method if called by the route code.\nregisterPage(route,regFn){const register=()=>{try{const{error,page}=regFn();this.pageCache[route]={error,page};this.pageRegisterEvents.emit(route,{error,page});}catch(error){this.pageCache[route]={error};this.pageRegisterEvents.emit(route,{error});}};if(process.env.NODE_ENV!=='production'){// Wait for webpack to become idle if it's not.\n// More info: https://github.com/zeit/next.js/pull/1511\nif(module.hot&&module.hot.status()!=='idle'){console.log(\"Waiting for webpack to become \\\"idle\\\" to initialize the page: \\\"\"+route+\"\\\"\");const check=status=>{if(status==='idle'){module.hot.removeStatusHandler(check);register();}};module.hot.status(check);return;}}register();}prefetch(route,isDependency){var _this2=this;return(0,_asyncToGenerator2.default)(function*(){if(process.env.__NEXT_EXPERIMENTAL_SELECTIVEPAGEBUILDING){yield _this2.promisedBuildId;}route=_this2.normalizeRoute(route);let scriptRoute=(route==='/'?'/index':route)+\".js\";if(process.env.__NEXT_MODERN_BUILD&&'noModule'in document.createElement('script')){scriptRoute=scriptRoute.replace(/\\.js$/,'.module.js');}const url=isDependency?route:_this2.assetPrefix+\"/_next/static/\"+encodeURIComponent(_this2.buildId)+\"/pages\"+scriptRoute;// n.b. If preload is not supported, we fall back to `loadPage` which has\n// its own deduping mechanism.\nif(document.querySelector(\"link[rel=\\\"preload\\\"][href^=\\\"\"+url+\"\\\"], script[data-next-page=\\\"\"+route+\"\\\"]\")){return;}// Inspired by quicklink, license: https://github.com/GoogleChromeLabs/quicklink/blob/master/LICENSE\nlet cn;if(cn=navigator.connection){// Don't prefetch if the user is on 2G or if Save-Data is enabled.\nif((cn.effectiveType||'').indexOf('2g')!==-1||cn.saveData){return;}}if(process.env.__NEXT_GRANULAR_CHUNKS&&!isDependency){;(yield _this2.getDependencies(route)).forEach(url=>{_this2.prefetch(url,true);});}// Feature detection is used to see if preload is supported\n// If not fall back to loading script tags before the page is loaded\n// https://caniuse.com/#feat=link-rel-preload\nif(hasPreload){preloadScript(url);return;}if(isDependency){// loadPage will automatically handle depencies, so no need to\n// preload them manually\nreturn;}if(document.readyState==='complete'){return _this2.loadPage(route).catch(()=>{});}else{return new _promise.default(resolve=>{window.addEventListener('load',()=>{_this2.loadPage(route).then(()=>resolve(),()=>resolve());});});}})();}}exports.default=PageLoader;"]},"metadata":{},"sourceType":"script"}